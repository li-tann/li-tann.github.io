"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5204],{71118:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>o,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"code/cpp_qt/qclass_QFileSystemWatcher","title":"\u6587\u4ef6\u5939\u76d1\u63a7\u529f\u80fd","description":"QFileSystemWatcher\u662fQt\u81ea\u5e26\u7684\u4e00\u4e2a\u6587\u4ef6\u5939\u76d1\u63a7\u7c7b\uff0c\u53ef\u4ee5\u68c0\u6d4b\u67d0\u4e00\u6587\u4ef6\u6216\u8005\u67d0\u4e00\u8def\u5f84\u7684\u6587\u4ef6\u53d8\u5316\u60c5\u51b5\u3002","source":"@site/docs/code/cpp_qt/qclass_QFileSystemWatcher.md","sourceDirName":"code/cpp_qt","slug":"/code/cpp_qt/qclass_QFileSystemWatcher","permalink":"/docs/code/cpp_qt/qclass_QFileSystemWatcher","draft":false,"unlisted":false,"editUrl":null,"tags":[{"inline":true,"label":"Cpp","permalink":"/docs/tags/cpp"},{"inline":true,"label":"Qt","permalink":"/docs/tags/qt"}],"version":"current","lastUpdatedBy":"li-tann","lastUpdatedAt":1735780614000,"frontMatter":{"custom_edit_url":null,"last_update":{"author":"li-tann"},"tags":["Cpp","Qt"]},"sidebar":"code","previous":{"title":"MD5\u7801\u83b7\u53d6","permalink":"/docs/code/cpp_qt/qclass_QCryptographicHash"},"next":{"title":"QNetWork\u4e0b\u8f7d\u6587\u4ef6","permalink":"/docs/code/cpp_qt/qclass_QNetWorkAccessManager"}}');var c=n(74848),s=n(28453);const a={custom_edit_url:null,last_update:{author:"li-tann"},tags:["Cpp","Qt"]},i="\u6587\u4ef6\u5939\u76d1\u63a7\u529f\u80fd",l={},d=[{value:".pro",id:"pro",level:2},{value:".h",id:"h",level:2},{value:".cpp",id:"cpp",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.header,{children:(0,c.jsx)(t.h1,{id:"\u6587\u4ef6\u5939\u76d1\u63a7\u529f\u80fd",children:"\u6587\u4ef6\u5939\u76d1\u63a7\u529f\u80fd"})}),"\n",(0,c.jsx)(t.p,{children:"QFileSystemWatcher\u662fQt\u81ea\u5e26\u7684\u4e00\u4e2a\u6587\u4ef6\u5939\u76d1\u63a7\u7c7b\uff0c\u53ef\u4ee5\u68c0\u6d4b\u67d0\u4e00\u6587\u4ef6\u6216\u8005\u67d0\u4e00\u8def\u5f84\u7684\u6587\u4ef6\u53d8\u5316\u60c5\u51b5\u3002"}),"\n",(0,c.jsx)(t.p,{children:"\u76d1\u63a7\u6587\u4ef6\u5939\uff0c\u53ea\u80fd\u76d1\u63a7\u6587\u4ef6\u5939\u662f\u5426\u53d1\u751f\u6539\u53d8\uff0c\u65e0\u6cd5\u76d1\u63a7\u5177\u4f53\u7684\u6539\u53d8\u5185\u5bb9\uff0c\u9700\u8981\u518d\u6dfb\u52a0\u51fd\u6570\u3002"}),"\n",(0,c.jsx)(t.h2,{id:"pro",children:".pro"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-qmake",children:"QT += core\n"})}),"\n",(0,c.jsx)(t.h2,{id:"h",children:".h"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:"#include <QFileSystemWatcher>\r\n\r\nclass xxx\r\n{\r\n    ...\r\n    QFileSystemWatcher fsWatcher;\r\n}\n"})}),"\n",(0,c.jsx)(t.h2,{id:"cpp",children:".cpp"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:'    //\u70b9\u51fb\u76d1\u63a7\u6309\u94ae\uff0c\u6dfb\u52a0\u8def\u5f84\u5230fsWatcher\u4e2d\uff0c\u6216\u70b9\u51fb\u89e3\u9664\u6309\u94ae\uff0c\u89e3\u9664\u8def\u5f84\u76d1\u63a7\r\nconnect(ui->pushButton_watcher,&QPushButton::clicked,this,[=](){\r\n    if(ui->pushButton_watcher->text() == "\u76d1\u63a7"){\r\n        fsWatcher.addPath(ui->lineEdit_path->text());\r\n\r\n        ui->pushButton_watcher->setText("\u89e3\u9664");\r\n        ui->lineEdit_path->setEnabled(false);\r\n\r\n    }else if(ui->pushButton_watcher->text() == "\u89e3\u9664"){\r\n        fsWatcher.removePath(ui->lineEdit_path->text());\r\n\r\n        ui->pushButton_watcher->setText("\u76d1\u63a7");\r\n        ui->lineEdit_path->setEnabled(true);\r\n\r\n        ui->textEdit->clear();\r\n    }\r\n    });\r\n//\u68c0\u6d4b\u5230\u76ee\u6807\u6587\u4ef6\u5939dir\u53d1\u751f\u53d8\u5316\u65f6\uff08\u53d1\u51fadirectoryChanged\u4fe1\u53f7\uff09\uff0c\u89e6\u53d1\u7684\u69fd\u51fd\u6570\r\n    connect(&fsWatcher,&QFileSystemWatcher::directoryChanged,this,[=](const QString str){\r\n        QString tmp = QString("directory changed: \\n%1").arg(str);\r\n        ui->textEdit->append(tmp);\r\n    });\r\n//\u68c0\u6d4b\u5230\u76ee\u6807\u6587\u4ef6file\u53d1\u751f\u53d8\u5316\u65f6\uff08\u53d1\u51fafileChanged\u4fe1\u53f7\uff09\uff0c\u89e6\u53d1\u7684\u69fd\u51fd\u6570\r\n    connect(&fsWatcher,&QFileSystemWatcher::fileChanged,this,[=](const QString str){\r\n        QString tmp = QString("file changed: \\n%1").arg(str);\r\n        ui->textEdit->append(tmp);\r\n    });\n'})})]})}function o(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(96540);const c={},s=r.createContext(c);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);